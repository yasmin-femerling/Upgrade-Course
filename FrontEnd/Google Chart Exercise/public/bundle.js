(()=>{"use strict";var t={73:(t,e,n)=>{n.r(e),n.d(e,{default:()=>s,GoogleCharts:()=>c});const o=Symbol("loadScript"),r=Symbol("instance");let i;class a{get[r](){return i}set[r](t){i=t}constructor(){if(this[r])return this[r];this[r]=this}reset(){i=null}[o](){return this.scriptPromise||(this.scriptPromise=new Promise((t=>{const e=document.getElementsByTagName("body")[0],n=document.createElement("script");n.type="text/javascript",n.onload=function(){c.api=window.google,c.api.charts.load("current",{packages:["corechart","table"]}),c.api.charts.setOnLoadCallback((()=>{t()}))},n.src="https://www.gstatic.com/charts/loader.js",e.appendChild(n)}))),this.scriptPromise}load(t,e){return this[o]().then((()=>{if(e){let n={};n=e instanceof Object?e:Array.isArray(e)?{packages:e}:{packages:[e]},this.api.charts.load("current",n),this.api.charts.setOnLoadCallback(t)}else{if("function"!=typeof t)throw"callback must be a function";t()}}))}}const c=new a,s=a},825:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{s(o.next(t))}catch(t){i(t)}}function c(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((o=o.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const r=n(73),i=n(575);class a extends HTMLElement{connectedCallback(){return o(this,void 0,void 0,(function*(){console.log("Adding a chart!"),yield c(this)}))}}function c(t){return o(this,void 0,void 0,(function*(){console.log("Adding a chart!"),yield(0,i.drawChart)(t);let e=document.createElement("button");e.innerHTML="Reload Data",t.appendChild(e),e.addEventListener("click",(()=>o(this,void 0,void 0,(function*(){return yield c(t)}))))}))}r.GoogleCharts.load((()=>{console.log("Loading Google Charts..."),customElements.define("google-chart",a)}))},83:function(t,e){var n=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{s(o.next(t))}catch(t){i(t)}}function c(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((o=o.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.fetchData=void 0,e.fetchData=function(t){return n(this,void 0,void 0,(function*(){const e=yield function(t){return n(this,void 0,void 0,(function*(){const e=yield fetch(t),n=yield e.json();return n.results?n.results:n}))}(t);return e}))}},220:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.processData=void 0;const o=n(73);e.processData=function(t,e){let n=function(t,e){let n=new Map;return t.forEach((t=>{null!=t[e]&&(n.has(t[e])?n.set(String(t[e]),n.get(t[e])+1):n.set(String(t[e]),1))})),n}(t,e);return function(t,e){let n=[[e,"Count"]];return t.forEach(((t,e)=>n.push([e,t]))),o.GoogleCharts.api.visualization.arrayToDataTable(n)}(n,e)}},575:function(t,e,n){var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{s(o.next(t))}catch(t){i(t)}}function c(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((o=o.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.drawChart=void 0;const r=n(83),i=n(220),a=n(73);e.drawChart=function(t){return o(this,void 0,void 0,(function*(){let e=t.hasAttribute("type")?t.getAttribute("type"):"",n=t.hasAttribute("title")?t.getAttribute("title"):"",c=t.hasAttribute("property")?t.getAttribute("property"):"",s=t.hasAttribute("data-source")?t.getAttribute("data-source"):null;var u=null==s?[]:yield function(t,e){return o(this,void 0,void 0,(function*(){console.log("Fetching data...");let n=yield(0,r.fetchData)(t);return(0,i.processData)(n,e)}))}(s,c),l={title:n};if("column"===e)var d=new a.GoogleCharts.api.visualization.ColumnChart(t);else d=new a.GoogleCharts.api.visualization.PieChart(t);console.log("Drawing chart!"),d.draw(u,l)}))}}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o].call(i.exports,i,i.exports,n),i.exports}n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(825)})();